"use strict";(self.webpackChunkstudents_projects=self.webpackChunkstudents_projects||[]).push([[468],{1468:(F,m,u)=>{u.r(m),u.d(m,{AuthModule:()=>C});var f=u(6895);function v(s,l,e,t,i,o,r){try{var a=s[o](r),c=a.value}catch(p){return void e(p)}a.done?l(c):Promise.resolve(c).then(t,i)}function _(s){return function(){var l=this,e=arguments;return new Promise(function(t,i){var o=s.apply(l,e);function r(c){v(o,t,i,r,a,"next",c)}function a(c){v(o,t,i,r,a,"throw",c)}r(void 0)})}}var n=u(8256),R=u(1135),I=u(9300);function O(s){return(0,I.h)((l,e)=>s<=e)}var U=u(5698),P=u(7579);const T={now:()=>(T.delegate||Date).now(),delegate:void 0};class k extends P.x{constructor(l=1/0,e=1/0,t=T){super(),this._bufferSize=l,this._windowTime=e,this._timestampProvider=t,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,l),this._windowTime=Math.max(1,e)}next(l){const{isStopped:e,_buffer:t,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:r}=this;e||(t.push(l),!i&&t.push(o.now()+r)),this._trimBuffer(),super.next(l)}_subscribe(l){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(l),{_infiniteTimeWindow:t,_buffer:i}=this,o=i.slice();for(let r=0;r<o.length&&!l.closed;r+=t?1:2)l.next(o[r]);return this._checkFinalizedStatuses(l),e}_trimBuffer(){const{_bufferSize:l,_timestampProvider:e,_buffer:t,_infiniteTimeWindow:i}=this,o=(i?1:2)*l;if(l<1/0&&o<t.length&&t.splice(0,t.length-o),!i){const r=e.now();let a=0;for(let c=1;c<t.length&&t[c]<=r;c+=2)a=c;a&&t.splice(0,a+1)}}}class L extends P.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(l){const{hasError:e,_hasValue:t,_value:i,thrownError:o,isStopped:r,_isComplete:a}=this;e?l.error(o):(r||a)&&(t&&l.next(i),l.complete())}next(l){this.isStopped||(this._value=l,this._hasValue=!0)}complete(){const{_hasValue:l,_value:e,_isComplete:t}=this;t||(this._isComplete=!0,l&&super.next(e),super.complete())}}var E=u(9751),y=u(576);class b{}const A={oneTapEnabled:!0};let h=(()=>{class s extends class S{constructor(){}loadScript(l,e,t,i=null){if(typeof document<"u"&&!document.getElementById(l)){let o=document.createElement("script");o.async=!0,o.src=e,o.onload=t,i||(i=document.head),i.appendChild(o)}}}{constructor(e,t){super(),this.clientId=e,this.initOptions=t,this.changeUser=new n.vpe,this._socialUser=new R.X(null),this._accessToken=new R.X(null),this._receivedAccessToken=new n.vpe,this.initOptions={...A,...this.initOptions},this._socialUser.pipe(O(1)).subscribe(this.changeUser),this._accessToken.pipe(O(1)).subscribe(this._receivedAccessToken)}initialize(e){return new Promise((t,i)=>{try{this.loadScript(s.PROVIDER_ID,"https://accounts.google.com/gsi/client",()=>{if(google.accounts.id.initialize({client_id:this.clientId,auto_select:e,callback:({credential:o})=>{const r=this.createSocialUser(o);this._socialUser.next(r)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe((0,I.h)(o=>null===o)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){const o=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(r=>r).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:o,prompt:this.initOptions.prompt,callback:r=>{r.error?this._accessToken.error({code:r.error,description:r.error_description,uri:r.error_uri}):this._accessToken.next(r.access_token)}})}t()})}catch(o){i(o)}})}getLoginStatus(){return new Promise((e,t)=>{this._socialUser.value?e(this._socialUser.value):t(`No user is currently logged in with ${s.PROVIDER_ID}`)})}refreshToken(){return new Promise((e,t)=>{google.accounts.id.revoke(this._socialUser.value.id,i=>{i.error?t(i.error):e(this._socialUser.value)})})}getAccessToken(){return new Promise((e,t)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe((0,U.q)(1)).subscribe(e)):t(this._socialUser.value?"No token client was instantiated, you should specify some scopes.":"You should be logged-in first.")})}revokeAccessToken(){return new Promise((e,t)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),e()}):t("No access token to revoke"):t("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){var e=this;return _(function*(){google.accounts.id.disableAutoSelect(),e._socialUser.next(null)})()}createSocialUser(e){const t=new b;t.idToken=e;const i=this.decodeJwt(e);return t.id=i.sub,t.name=i.name,t.email=i.email,t.photoUrl=i.picture,t.firstName=i.given_name,t.lastName=i.family_name,t}decodeJwt(e){const i=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(window.atob(i).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)}}return s.PROVIDER_ID="GOOGLE",s})(),d=(()=>{class s{constructor(e,t,i){this._ngZone=t,this._injector=i,this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new k(1),this.initialized=!1,this._initState=new L,e instanceof Promise?e.then(o=>{this.initialize(o)}):this.initialize(e)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(e){this.autoLogin=void 0!==e.autoLogin&&e.autoLogin;const{onError:t=console.error}=e;e.providers.forEach(i=>{this.providers.set(i.id,"prototype"in i.provider?this._injector.get(i.provider):i.provider)}),Promise.all(Array.from(this.providers.values()).map(i=>i.initialize(this.autoLogin))).then(()=>{if(this.autoLogin){const i=[];let o=!1;this.providers.forEach((r,a)=>{const c=r.getLoginStatus();i.push(c),c.then(p=>{this.setUser(p,a),o=!0}).catch(console.debug)}),Promise.all(i).catch(()=>{o||(this._user=null,this._authState.next(null))})}this.providers.forEach((i,o)=>{(function D(s){return!!s&&(s instanceof E.y||(0,y.m)(s.lift)&&(0,y.m)(s.subscribe))})(i.changeUser)&&i.changeUser.subscribe(r=>{this._ngZone.run(()=>{this.setUser(r,o)})})})}).catch(i=>{t(i)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(e){var t=this;return _(function*(){const i=t.providers.get(e);if(!t.initialized)throw s.ERR_NOT_INITIALIZED;if(!i)throw s.ERR_LOGIN_PROVIDER_NOT_FOUND;if(!(i instanceof h))throw s.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN;return yield i.getAccessToken()})()}refreshAuthToken(e){return new Promise((t,i)=>{if(this.initialized){const o=this.providers.get(e);o?"function"!=typeof o.refreshToken?i(s.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):o.refreshToken().then(r=>{this.setUser(r,e),t()}).catch(r=>{i(r)}):i(s.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(s.ERR_NOT_INITIALIZED)})}refreshAccessToken(e){return new Promise((t,i)=>{if(this.initialized)if(e!==h.PROVIDER_ID)i(s.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const o=this.providers.get(e);o instanceof h?o.revokeAccessToken().then(t).catch(i):i(s.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(s.ERR_NOT_INITIALIZED)})}signIn(e,t){return new Promise((i,o)=>{if(this.initialized){let r=this.providers.get(e);r?r.signIn(t).then(a=>{this.setUser(a,e),i(a)}).catch(a=>{o(a)}):o(s.ERR_LOGIN_PROVIDER_NOT_FOUND)}else o(s.ERR_NOT_INITIALIZED)})}signOut(e=!1){return new Promise((t,i)=>{if(this.initialized)if(this._user){let r=this.providers.get(this._user.provider);r?r.signOut(e).then(()=>{t(),this.setUser(null)}).catch(a=>{i(a)}):i(s.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(s.ERR_NOT_LOGGED_IN);else i(s.ERR_NOT_INITIALIZED)})}setUser(e,t){e&&t&&(e.provider=t),this._user=e,this._authState.next(e)}}return s.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",s.ERR_NOT_LOGGED_IN="Not logged in",s.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",s.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",s.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token",s.\u0275fac=function(e){return new(e||s)(n.LFG("SocialAuthServiceConfig"),n.LFG(n.R0b),n.LFG(n.zs3))},s.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),N=(()=>{class s{constructor(e){if(e)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(e){return{ngModule:s,providers:[d,{provide:"SocialAuthServiceConfig",useValue:e}]}}}return s.\u0275fac=function(e){return new(e||s)(n.LFG(s,12))},s.\u0275mod=n.oAB({type:s}),s.\u0275inj=n.cJS({providers:[d],imports:[f.ez]}),s})();var z=u(2340),g=u(8250);const M=function(){return["/projects"]};let w=(()=>{class s{constructor(e){this.socialAuthService=e}ngOnInit(){this.socialAuthService.authState.subscribe(e=>{this.socialUser=e,this.isLoggedin=null!=e,console.log(this.socialUser)})}signInWithGoogle(){this.socialAuthService.signIn(h.PROVIDER_ID).then(e=>{console.log(e)}).catch(e=>{console.log(e)})}signOut(){this.socialAuthService.signOut()}}return s.\u0275fac=function(e){return new(e||s)(n.Y36(d))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-login"]],decls:33,vars:2,consts:[[1,"login","backgroundImage"],[1,"wrapper","wrapper-login"],[1,"container","container-login","animated","fadeIn"],[1,"text-center"],[1,"login-form"],[1,"form-group"],["for","username",1,"placeholder"],["id","username","name","username","type","text","required","",1,"form-control"],["for","password",1,"placeholder"],["href","#",1,"link","float-right"],[1,"position-relative"],["id","password","name","password","type","password","required","",1,"form-control"],[1,"show-password"],[1,"flaticon-interface"],[1,"form-group","form-action-d-flex","mb-3"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","rememberme",1,"custom-control-input"],["for","rememberme",1,"custom-control-label","m-0"],[1,"btn","btn-primary","col-md-5","float-right","mt-3","mt-sm-0","fw-bold",3,"routerLink"],[1,"login-account"],[1,"msg"],["href","#","id","show-signup",1,"link"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),n._uU(4,"Sign In To Admin"),n.qZA(),n.TgZ(5,"div",4)(6,"div",5)(7,"label",6)(8,"b"),n._uU(9,"Username"),n.qZA()(),n._UZ(10,"input",7),n.qZA(),n.TgZ(11,"div",5)(12,"label",8)(13,"b"),n._uU(14,"Password"),n.qZA()(),n.TgZ(15,"a",9),n._uU(16,"Forget Password ?"),n.qZA(),n.TgZ(17,"div",10),n._UZ(18,"input",11),n.TgZ(19,"div",12),n._UZ(20,"i",13),n.qZA()()(),n.TgZ(21,"div",14)(22,"div",15),n._UZ(23,"input",16),n.TgZ(24,"label",17),n._uU(25,"Remember Me"),n.qZA()(),n.TgZ(26,"a",18),n._uU(27,"Sign In"),n.qZA()(),n.TgZ(28,"div",19)(29,"span",20),n._uU(30,"Don't have an account yet ?"),n.qZA(),n.TgZ(31,"a",21),n._uU(32,"Sign Up"),n.qZA()()()()()()),2&e&&(n.xp6(26),n.Q6J("routerLink",n.DdM(1,M)))},dependencies:[g.yS],encapsulation:2}),s})();const j=[{path:"",children:[{path:"login",component:w,title:"Login"},{path:"**",redirectTo:"login",pathMatch:"full"}]}];let V=(()=>{class s{}return s.components=[w],s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=n.oAB({type:s}),s.\u0275inj=n.cJS({imports:[g.Bz.forChild(j),g.Bz]}),s})(),C=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=n.oAB({type:s}),s.\u0275inj=n.cJS({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!0,providers:[{id:h.PROVIDER_ID,provider:new h(z.N.googleClientId)}],onError:l=>{console.error(l)}}}],imports:[f.ez,V,N]}),s})()}}]);