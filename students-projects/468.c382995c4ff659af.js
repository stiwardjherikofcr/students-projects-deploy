"use strict";(self.webpackChunkstudents_projects=self.webpackChunkstudents_projects||[]).push([[468],{1468:(G,m,u)=>{u.r(m),u.d(m,{AuthModule:()=>x});var g=u(6895);function f(i,r,e,t,s,o,l){try{var a=i[o](l),c=a.value}catch(d){return void e(d)}a.done?r(c):Promise.resolve(c).then(t,s)}function _(i){return function(){var r=this,e=arguments;return new Promise(function(t,s){var o=i.apply(r,e);function l(c){f(o,t,s,l,a,"next",c)}function a(c){f(o,t,s,l,a,"throw",c)}l(void 0)})}}var n=u(8256),v=u(1135),R=u(9300);function I(i){return(0,R.h)((r,e)=>i<=e)}var O=u(5698),P=u(7579);const T={now:()=>(T.delegate||Date).now(),delegate:void 0};class k extends P.x{constructor(r=1/0,e=1/0,t=T){super(),this._bufferSize=r,this._windowTime=e,this._timestampProvider=t,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,r),this._windowTime=Math.max(1,e)}next(r){const{isStopped:e,_buffer:t,_infiniteTimeWindow:s,_timestampProvider:o,_windowTime:l}=this;e||(t.push(r),!s&&t.push(o.now()+l)),this._trimBuffer(),super.next(r)}_subscribe(r){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(r),{_infiniteTimeWindow:t,_buffer:s}=this,o=s.slice();for(let l=0;l<o.length&&!r.closed;l+=t?1:2)r.next(o[l]);return this._checkFinalizedStatuses(r),e}_trimBuffer(){const{_bufferSize:r,_timestampProvider:e,_buffer:t,_infiniteTimeWindow:s}=this,o=(s?1:2)*r;if(r<1/0&&o<t.length&&t.splice(0,t.length-o),!s){const l=e.now();let a=0;for(let c=1;c<t.length&&t[c]<=l;c+=2)a=c;a&&t.splice(0,a+1)}}}class w extends P.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(r){const{hasError:e,_hasValue:t,_value:s,thrownError:o,isStopped:l,_isComplete:a}=this;e?r.error(o):(l||a)&&(t&&r.next(s),r.complete())}next(r){this.isStopped||(this._value=r,this._hasValue=!0)}complete(){const{_hasValue:r,_value:e,_isComplete:t}=this;t||(this._isComplete=!0,r&&super.next(e),super.complete())}}var E=u(9751),y=u(576);class S{}const A={oneTapEnabled:!0};let h=(()=>{class i extends class b{constructor(){}loadScript(r,e,t,s=null){if(typeof document<"u"&&!document.getElementById(r)){let o=document.createElement("script");o.async=!0,o.src=e,o.onload=t,s||(s=document.head),s.appendChild(o)}}}{constructor(e,t){super(),this.clientId=e,this.initOptions=t,this.changeUser=new n.vpe,this._socialUser=new v.X(null),this._accessToken=new v.X(null),this._receivedAccessToken=new n.vpe,this.initOptions={...A,...this.initOptions},this._socialUser.pipe(I(1)).subscribe(this.changeUser),this._accessToken.pipe(I(1)).subscribe(this._receivedAccessToken)}initialize(e){return new Promise((t,s)=>{try{this.loadScript(i.PROVIDER_ID,"https://accounts.google.com/gsi/client",()=>{if(google.accounts.id.initialize({client_id:this.clientId,auto_select:e,callback:({credential:o})=>{const l=this.createSocialUser(o);this._socialUser.next(l)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe((0,R.h)(o=>null===o)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){const o=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(l=>l).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:o,prompt:this.initOptions.prompt,callback:l=>{l.error?this._accessToken.error({code:l.error,description:l.error_description,uri:l.error_uri}):this._accessToken.next(l.access_token)}})}t()})}catch(o){s(o)}})}getLoginStatus(){return new Promise((e,t)=>{this._socialUser.value?e(this._socialUser.value):t(`No user is currently logged in with ${i.PROVIDER_ID}`)})}refreshToken(){return new Promise((e,t)=>{google.accounts.id.revoke(this._socialUser.value.id,s=>{s.error?t(s.error):e(this._socialUser.value)})})}getAccessToken(){return new Promise((e,t)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe((0,O.q)(1)).subscribe(e)):t(this._socialUser.value?"No token client was instantiated, you should specify some scopes.":"You should be logged-in first.")})}revokeAccessToken(){return new Promise((e,t)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),e()}):t("No access token to revoke"):t("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){var e=this;return _(function*(){google.accounts.id.disableAutoSelect(),e._socialUser.next(null)})()}createSocialUser(e){const t=new S;t.idToken=e;const s=this.decodeJwt(e);return t.id=s.sub,t.name=s.name,t.email=s.email,t.photoUrl=s.picture,t.firstName=s.given_name,t.lastName=s.family_name,t}decodeJwt(e){const s=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(window.atob(s).split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)}}return i.PROVIDER_ID="GOOGLE",i})(),p=(()=>{class i{constructor(e,t,s){this._ngZone=t,this._injector=s,this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new k(1),this.initialized=!1,this._initState=new w,e instanceof Promise?e.then(o=>{this.initialize(o)}):this.initialize(e)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(e){this.autoLogin=void 0!==e.autoLogin&&e.autoLogin;const{onError:t=console.error}=e;e.providers.forEach(s=>{this.providers.set(s.id,"prototype"in s.provider?this._injector.get(s.provider):s.provider)}),Promise.all(Array.from(this.providers.values()).map(s=>s.initialize(this.autoLogin))).then(()=>{if(this.autoLogin){const s=[];let o=!1;this.providers.forEach((l,a)=>{const c=l.getLoginStatus();s.push(c),c.then(d=>{this.setUser(d,a),o=!0}).catch(console.debug)}),Promise.all(s).catch(()=>{o||(this._user=null,this._authState.next(null))})}this.providers.forEach((s,o)=>{(function D(i){return!!i&&(i instanceof E.y||(0,y.m)(i.lift)&&(0,y.m)(i.subscribe))})(s.changeUser)&&s.changeUser.subscribe(l=>{this._ngZone.run(()=>{this.setUser(l,o)})})})}).catch(s=>{t(s)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(e){var t=this;return _(function*(){const s=t.providers.get(e);if(!t.initialized)throw i.ERR_NOT_INITIALIZED;if(!s)throw i.ERR_LOGIN_PROVIDER_NOT_FOUND;if(!(s instanceof h))throw i.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN;return yield s.getAccessToken()})()}refreshAuthToken(e){return new Promise((t,s)=>{if(this.initialized){const o=this.providers.get(e);o?"function"!=typeof o.refreshToken?s(i.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):o.refreshToken().then(l=>{this.setUser(l,e),t()}).catch(l=>{s(l)}):s(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else s(i.ERR_NOT_INITIALIZED)})}refreshAccessToken(e){return new Promise((t,s)=>{if(this.initialized)if(e!==h.PROVIDER_ID)s(i.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const o=this.providers.get(e);o instanceof h?o.revokeAccessToken().then(t).catch(s):s(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else s(i.ERR_NOT_INITIALIZED)})}signIn(e,t){return new Promise((s,o)=>{if(this.initialized){let l=this.providers.get(e);l?l.signIn(t).then(a=>{this.setUser(a,e),s(a)}).catch(a=>{o(a)}):o(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else o(i.ERR_NOT_INITIALIZED)})}signOut(e=!1){return new Promise((t,s)=>{if(this.initialized)if(this._user){let l=this.providers.get(this._user.provider);l?l.signOut(e).then(()=>{t(),this.setUser(null)}).catch(a=>{s(a)}):s(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else s(i.ERR_NOT_LOGGED_IN);else s(i.ERR_NOT_INITIALIZED)})}setUser(e,t){e&&t&&(e.provider=t),this._user=e,this._authState.next(e)}}return i.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",i.ERR_NOT_LOGGED_IN="Not logged in",i.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",i.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",i.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token",i.\u0275fac=function(e){return new(e||i)(n.LFG("SocialAuthServiceConfig"),n.LFG(n.R0b),n.LFG(n.zs3))},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),N=(()=>{class i{constructor(e,t){this.type="icon",this.size="medium",this.text="signin_with",this.shape="rectangular",this.theme="outline",this.logo_alignment="left",this.width="",this.locale="",t.initState.pipe((0,O.q)(1)).subscribe(()=>{Promise.resolve(this.width).then(s=>{s>"400"||s<"200"&&""!=s?Promise.reject("Please note .. max-width 400 , min-width 200 (https://developers.google.com/identity/gsi/web/tools/configurator)"):google.accounts.id.renderButton(e.nativeElement,{type:this.type,size:this.size,text:this.text,width:this.width,shape:this.shape,theme:this.theme,logo_alignment:this.logo_alignment,locale:this.locale})})})}}return i.\u0275fac=function(e){return new(e||i)(n.Y36(n.SBq),n.Y36(p))},i.\u0275dir=n.lG2({type:i,selectors:[["asl-google-signin-button"]],inputs:{type:"type",size:"size",text:"text",shape:"shape",theme:"theme",logo_alignment:"logo_alignment",width:"width",locale:"locale"}}),i})(),z=(()=>{class i{constructor(e){if(e)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(e){return{ngModule:i,providers:[p,{provide:"SocialAuthServiceConfig",useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)(n.LFG(i,12))},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({providers:[p],imports:[g.ez]}),i})();var M=u(2340),L=u(2767);function C(i,r){1&i&&n._UZ(0,"asl-google-signin-button")}function j(i,r){if(1&i&&(n.TgZ(0,"div"),n._UZ(1,"img",9),n.TgZ(2,"div")(3,"h4"),n._uU(4),n.qZA(),n.TgZ(5,"p"),n._uU(6),n.qZA()()()),2&i){const e=n.oxw();n.xp6(1),n.s9C("src",e.socialUser.photoUrl,n.LSH),n.xp6(3),n.Oqu(e.socialUser.name),n.xp6(2),n.Oqu(e.socialUser.email)}}let U=(()=>{class i{constructor(e){this.socialAuthService=e}ngOnInit(){this.socialAuthService.authState.subscribe(e=>{this.socialUser=e,this.isLoggedin=null!=e,console.log(this.socialUser)})}signInWithGoogle(){this.socialAuthService.signIn(h.PROVIDER_ID).then(e=>{console.log(e)}).catch(e=>{console.log(e)})}signOut(){this.socialAuthService.signOut()}}return i.\u0275fac=function(e){return new(e||i)(n.Y36(p))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-login"]],decls:12,vars:2,consts:[[1,"login","backgroundImage"],[1,"wrapper","wrapper-login"],[1,"container","container-login","animated","fadeIn"],[1,"text-center"],[1,"login-form"],[1,"form-action"],["type","button",1,"btn","btn-primary","btn-rounded","btn-social",3,"click"],[1,"fab","fa-google"],[4,"ngIf"],[3,"src"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),n._uU(4,"Iniciar Sesi\xf3n para Acceder"),n.qZA(),n.TgZ(5,"div",4)(6,"div",5)(7,"button",6),n.NdJ("click",function(){return t.signInWithGoogle()}),n._UZ(8,"i",7),n._uU(9," Iniciar Sesi\xf3n con Google "),n.qZA(),n.YNc(10,C,1,0,"asl-google-signin-button",8),n.YNc(11,j,7,3,"div",8),n.qZA()()()()()),2&e&&(n.xp6(10),n.Q6J("ngIf",!t.socialUser),n.xp6(1),n.Q6J("ngIf",t.socialUser))},dependencies:[g.O5,N],encapsulation:2}),i})();const V=[{path:"",children:[{path:"login",component:U,title:"Login"},{path:"**",redirectTo:"login",pathMatch:"full"}]}];let F=(()=>{class i{}return i.components=[U],i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[L.Bz.forChild(V),L.Bz]}),i})(),x=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!0,providers:[{id:h.PROVIDER_ID,provider:new h(M.N.googleClientId)}],onError:r=>{console.error(r)}}}],imports:[g.ez,F,z]}),i})()}}]);