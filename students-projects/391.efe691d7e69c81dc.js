"use strict";(self.webpackChunkstudents_projects=self.webpackChunkstudents_projects||[]).push([[391],{9391:(L,p,r)=>{r.r(p),r.d(p,{DatabasesModule:()=>G});var m=r(6895),s=r(433),c=r(5675),e=r(8256),g=r(2024),f=r(9869),i=r(2506);let b=(()=>{class a{constructor(t,o,l){this.fb=t,this.databaseService=o,this.currentUserService=l,this.close=new e.vpe,this.username=this.currentUserService.getCurrentUserSubject().username.split("@")[0],this.formUserSGDB=this.fb.group({password:new s.NI("",s.kI.compose([s.kI.required,s.kI.minLength(8),s.kI.maxLength(20),s.kI.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])[a-zA-Z0-9]+$")]))})}ngOnInit(){this.openModal("show")}openModal(t){$("#addRowModal").modal(t)}closedModal(t=!1){this.openModal("hide"),this.close.emit(t)}createUserSGDB(){const t=this.formUserSGDB.get("password").value;this.databaseService.createUserSGDB(t).subscribe({next:o=>console.log(o),error:o=>console.log(o),complete:()=>console.log("completed")}),this.closedModal(!0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.qu),e.Y36(g.k),e.Y36(f.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add"]],outputs:{close:"close"},decls:35,vars:3,consts:[["id","addRowModal","data-backdrop","static","data-keyboard","false","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","no-bd"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"font-italic"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-12"],[1,"form-group","form-group-default"],["type","text","name","username","readonly","",1,"form-control",3,"value"],[1,"col-md-12"],["for","password"],["data-toggle","tooltip","data-placement","top","title","Campo Obligatorio",1,"text-danger"],[1,"input-group"],["type","password","id","password","formControlName","password","placeholder","Ingrese la contrase\xf1a",1,"form-control"],[1,"input-group-prepend"],["data-toggle","tooltip","data-placement","top","title","La contrase\xf1a debe tener al menos 8 caracteres, una letra may\xfascula, una min\xfascula y un n\xfamero","data-original-title","Contrase\xf1a"],[1,"fas","fa-question-circle"],[1,"modal-footer","no-bd"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5,"Credenciales de la Base de Datos"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return o.closedModal()}),e.TgZ(7,"span",6),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",7)(10,"p",8),e._uU(11," Recuerde guardar los credenciales de la base de datos. De lo contrario no podr\xe1 acceder a ella. Estos credenciales son validos para el acceso al Sistema de Gesti\xf3n de Base de Datos de MariaDB y PostgreSQL. "),e.qZA(),e.TgZ(12,"form",9),e.NdJ("ngSubmit",function(){return o.createUserSGDB()}),e.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"label"),e._uU(17,"Usuario"),e.qZA(),e._UZ(18,"input",13),e.qZA()(),e.TgZ(19,"div",14)(20,"div",12)(21,"label",15),e._uU(22,"Contrase\xf1a "),e.TgZ(23,"span",16),e._uU(24,"*"),e.qZA()(),e.TgZ(25,"div",17),e._UZ(26,"input",18),e.TgZ(27,"div",19)(28,"span",20),e._UZ(29,"i",21),e.qZA()()()()()(),e.TgZ(30,"div",22)(31,"button",23),e._uU(32,"Guardar"),e.qZA(),e.TgZ(33,"button",24),e.NdJ("click",function(){return o.closedModal()}),e._uU(34,"Cancelar"),e.qZA()()()()()()()),2&t&&(e.xp6(12),e.Q6J("formGroup",o.formUserSGDB),e.xp6(6),e.Q6J("value",o.username),e.xp6(13),e.Q6J("disabled",o.formUserSGDB.invalid))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),a})();function h(a,n){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",25),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.createDatabase())}),e._UZ(2,"i",26),e._uU(3," Crear Usuario "),e.qZA(),e.BQk()}}function _(a,n){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-add",27),e.NdJ("close",function(l){e.CHM(t);const u=e.oxw();return e.KtG(u.closeModal(l))}),e.qZA(),e.BQk()}}function Z(a,n){if(1&a&&e._uU(0),2&a){const t=n.row;e.hij(" ",null==t?null:t.id," ")}}function v(a,n){if(1&a&&e._uU(0),2&a){const t=n.row;e.hij(" ",null==t?null:t.context," ")}}function T(a,n){if(1&a&&e._uU(0),2&a){const t=n.row;e.hij(" ",null==t?null:t.count," ")}}function U(a,n){if(1&a&&e._uU(0),2&a){const t=n.row;e.hij(" ",null==t?null:t.type.type," ")}}function A(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",28)(1,"button",29),e.NdJ("click",function(){const u=e.CHM(t).row,B=e.oxw();return e.KtG(B.deleteDatabase(u.id))}),e._UZ(2,"i",30),e.qZA()()}}const w=function(){return["/dashboard"]},x=function(){return["/databases"]};let C=(()=>{class a{constructor(t,o){this.databaseService=t,this.currentUserService=o,this.limit=10,this.showModal=!1,this.currentUser=this.currentUserService.getCurrentUserSubject()}ngOnInit(){this.getDatabases()}getDatabases(){this.databaseService.getDatabases(this.currentUser.id).subscribe(t=>{this.rows=t})}closeModal(t){this.showModal=t}createDatabase(){this.showModal=!0}deleteDatabase(t){console.log(t)}hasSGDB(){return this.currentUser.hasOwnProperty("has_sgbd_user")&&!0===this.currentUser.has_sgbd_user}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.k),e.Y36(f.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-list"]],decls:39,vars:22,consts:[[1,"page-header"],[1,"page-title"],[1,"breadcrumbs"],[1,"nav-home"],[3,"routerLink"],[1,"flaticon-home"],[1,"separator"],[1,"flaticon-right-arrow"],[1,"nav-item"],[1,"ml-auto"],[4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],["rowHeight","auto",1,"material","striped",3,"columnMode","headerHeight","footerHeight","rows","limit"],["table",""],["name","ID",3,"flexGrow","resizeable"],["ngx-datatable-cell-template",""],["name","Nombre Base de Datos",3,"flexGrow","resizeable"],["name","Cantidad Tablas",3,"flexGrow","resizeable"],["name","SGBD",3,"flexGrow","resizeable"],["name","Acciones",3,"flexGrow","resizeable","sortable"],["type","button",1,"btn","btn-primary","ml-auto",3,"click"],[1,"fa","fa-plus"],[3,"close"],[1,"form-button-action"],["type","button","data-toggle","tooltip","title","Eliminar","data-original-title","Eliminar Base de Datos",1,"btn","btn-link","btn-default",3,"click"],[1,"fa","fa-times"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Lista Bases de Datos"),e.qZA(),e.TgZ(3,"ul",2)(4,"li",3)(5,"a",4),e._UZ(6,"i",5),e.qZA()(),e.TgZ(7,"li",6),e._UZ(8,"i",7),e.qZA(),e.TgZ(9,"li",8)(10,"a",4),e._uU(11,"Bases de Datos"),e.qZA()(),e.TgZ(12,"li",6),e._UZ(13,"i",7),e.qZA(),e.TgZ(14,"li",8)(15,"a"),e._uU(16,"Lista"),e.qZA()()(),e.TgZ(17,"div",9),e.YNc(18,h,4,0,"ng-container",10),e.qZA()(),e.TgZ(19,"div",11)(20,"div",12)(21,"div",13)(22,"div",14)(23,"div",15),e._uU(24,"Lista de Bases de Datos"),e.qZA()(),e.TgZ(25,"div",16),e.YNc(26,_,2,0,"ng-container",10),e.TgZ(27,"ngx-datatable",17,18)(29,"ngx-datatable-column",19),e.YNc(30,Z,1,1,"ng-template",20),e.qZA(),e.TgZ(31,"ngx-datatable-column",21),e.YNc(32,v,1,1,"ng-template",20),e.qZA(),e.TgZ(33,"ngx-datatable-column",22),e.YNc(34,T,1,1,"ng-template",20),e.qZA(),e.TgZ(35,"ngx-datatable-column",23),e.YNc(36,U,1,1,"ng-template",20),e.qZA(),e.TgZ(37,"ngx-datatable-column",24),e.YNc(38,A,3,0,"ng-template",20),e.qZA()()()()()()),2&t&&(e.xp6(5),e.Q6J("routerLink",e.DdM(20,w)),e.xp6(5),e.Q6J("routerLink",e.DdM(21,x)),e.xp6(8),e.Q6J("ngIf",!o.hasSGDB()),e.xp6(8),e.Q6J("ngIf",o.showModal),e.xp6(1),e.Q6J("columnMode","flex")("headerHeight",50)("footerHeight",50)("rows",o.rows)("limit",o.limit),e.xp6(2),e.Q6J("flexGrow",1)("resizeable",!1),e.xp6(2),e.Q6J("flexGrow",2)("resizeable",!1),e.xp6(2),e.Q6J("flexGrow",2)("resizeable",!1),e.xp6(2),e.Q6J("flexGrow",2)("resizeable",!1),e.xp6(2),e.Q6J("flexGrow",1)("resizeable",!1)("sortable",!1))},dependencies:[m.O5,c.yS,i.nE,i.UC,i.vq,b]}),a})();var D=r(115),S=r(9753),d=r(4488);const M=[{path:"",component:D.p,children:[{path:"",component:C,pathMatch:"full",title:"Lista de Bases de Datos",canActivate:[S.pb],data:{roles:[d.H.ADMIN,d.H.SUPPORT,d.H.TEACHER,d.H.STUDENT]}}]}];let y=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[c.Bz.forChild(M),c.Bz]}),a})(),G=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.ez,s.UX,y,i.xD]}),a})()}}]);