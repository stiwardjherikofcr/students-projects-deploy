"use strict";(self.webpackChunkstudents_projects=self.webpackChunkstudents_projects||[]).push([[468],{1468:(x,m,u)=>{u.r(m),u.d(m,{AuthModule:()=>F});var f=u(6895);function v(o,l,e,t,i,s,r){try{var a=o[s](r),c=a.value}catch(d){return void e(d)}a.done?l(c):Promise.resolve(c).then(t,i)}function _(o){return function(){var l=this,e=arguments;return new Promise(function(t,i){var s=o.apply(l,e);function r(c){v(s,t,i,r,a,"next",c)}function a(c){v(s,t,i,r,a,"throw",c)}r(void 0)})}}var n=u(8256),R=u(1135),I=u(9300);function O(o){return(0,I.h)((l,e)=>o<=e)}var k=u(5698),P=u(7579);const T={now:()=>(T.delegate||Date).now(),delegate:void 0};class U extends P.x{constructor(l=1/0,e=1/0,t=T){super(),this._bufferSize=l,this._windowTime=e,this._timestampProvider=t,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,l),this._windowTime=Math.max(1,e)}next(l){const{isStopped:e,_buffer:t,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:r}=this;e||(t.push(l),!i&&t.push(s.now()+r)),this._trimBuffer(),super.next(l)}_subscribe(l){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(l),{_infiniteTimeWindow:t,_buffer:i}=this,s=i.slice();for(let r=0;r<s.length&&!l.closed;r+=t?1:2)l.next(s[r]);return this._checkFinalizedStatuses(l),e}_trimBuffer(){const{_bufferSize:l,_timestampProvider:e,_buffer:t,_infiniteTimeWindow:i}=this,s=(i?1:2)*l;if(l<1/0&&s<t.length&&t.splice(0,t.length-s),!i){const r=e.now();let a=0;for(let c=1;c<t.length&&t[c]<=r;c+=2)a=c;a&&t.splice(0,a+1)}}}class L extends P.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(l){const{hasError:e,_hasValue:t,_value:i,thrownError:s,isStopped:r,_isComplete:a}=this;e?l.error(s):(r||a)&&(t&&l.next(i),l.complete())}next(l){this.isStopped||(this._value=l,this._hasValue=!0)}complete(){const{_hasValue:l,_value:e,_isComplete:t}=this;t||(this._isComplete=!0,l&&super.next(e),super.complete())}}var E=u(9751),y=u(576);class b{}const A={oneTapEnabled:!0};let h=(()=>{class o extends class S{constructor(){}loadScript(l,e,t,i=null){if(typeof document<"u"&&!document.getElementById(l)){let s=document.createElement("script");s.async=!0,s.src=e,s.onload=t,i||(i=document.head),i.appendChild(s)}}}{constructor(e,t){super(),this.clientId=e,this.initOptions=t,this.changeUser=new n.vpe,this._socialUser=new R.X(null),this._accessToken=new R.X(null),this._receivedAccessToken=new n.vpe,this.initOptions={...A,...this.initOptions},this._socialUser.pipe(O(1)).subscribe(this.changeUser),this._accessToken.pipe(O(1)).subscribe(this._receivedAccessToken)}initialize(e){return new Promise((t,i)=>{try{this.loadScript(o.PROVIDER_ID,"https://accounts.google.com/gsi/client",()=>{if(google.accounts.id.initialize({client_id:this.clientId,auto_select:e,callback:({credential:s})=>{const r=this.createSocialUser(s);this._socialUser.next(r)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe((0,I.h)(s=>null===s)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){const s=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(r=>r).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:s,prompt:this.initOptions.prompt,callback:r=>{r.error?this._accessToken.error({code:r.error,description:r.error_description,uri:r.error_uri}):this._accessToken.next(r.access_token)}})}t()})}catch(s){i(s)}})}getLoginStatus(){return new Promise((e,t)=>{this._socialUser.value?e(this._socialUser.value):t(`No user is currently logged in with ${o.PROVIDER_ID}`)})}refreshToken(){return new Promise((e,t)=>{google.accounts.id.revoke(this._socialUser.value.id,i=>{i.error?t(i.error):e(this._socialUser.value)})})}getAccessToken(){return new Promise((e,t)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe((0,k.q)(1)).subscribe(e)):t(this._socialUser.value?"No token client was instantiated, you should specify some scopes.":"You should be logged-in first.")})}revokeAccessToken(){return new Promise((e,t)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),e()}):t("No access token to revoke"):t("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){var e=this;return _(function*(){google.accounts.id.disableAutoSelect(),e._socialUser.next(null)})()}createSocialUser(e){const t=new b;t.idToken=e;const i=this.decodeJwt(e);return t.id=i.sub,t.name=i.name,t.email=i.email,t.photoUrl=i.picture,t.firstName=i.given_name,t.lastName=i.family_name,t}decodeJwt(e){const i=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(window.atob(i).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}}return o.PROVIDER_ID="GOOGLE",o})(),g=(()=>{class o{constructor(e,t,i){this._ngZone=t,this._injector=i,this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new U(1),this.initialized=!1,this._initState=new L,e instanceof Promise?e.then(s=>{this.initialize(s)}):this.initialize(e)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(e){this.autoLogin=void 0!==e.autoLogin&&e.autoLogin;const{onError:t=console.error}=e;e.providers.forEach(i=>{this.providers.set(i.id,"prototype"in i.provider?this._injector.get(i.provider):i.provider)}),Promise.all(Array.from(this.providers.values()).map(i=>i.initialize(this.autoLogin))).then(()=>{if(this.autoLogin){const i=[];let s=!1;this.providers.forEach((r,a)=>{const c=r.getLoginStatus();i.push(c),c.then(d=>{this.setUser(d,a),s=!0}).catch(console.debug)}),Promise.all(i).catch(()=>{s||(this._user=null,this._authState.next(null))})}this.providers.forEach((i,s)=>{(function D(o){return!!o&&(o instanceof E.y||(0,y.m)(o.lift)&&(0,y.m)(o.subscribe))})(i.changeUser)&&i.changeUser.subscribe(r=>{this._ngZone.run(()=>{this.setUser(r,s)})})})}).catch(i=>{t(i)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(e){var t=this;return _(function*(){const i=t.providers.get(e);if(!t.initialized)throw o.ERR_NOT_INITIALIZED;if(!i)throw o.ERR_LOGIN_PROVIDER_NOT_FOUND;if(!(i instanceof h))throw o.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN;return yield i.getAccessToken()})()}refreshAuthToken(e){return new Promise((t,i)=>{if(this.initialized){const s=this.providers.get(e);s?"function"!=typeof s.refreshToken?i(o.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):s.refreshToken().then(r=>{this.setUser(r,e),t()}).catch(r=>{i(r)}):i(o.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(o.ERR_NOT_INITIALIZED)})}refreshAccessToken(e){return new Promise((t,i)=>{if(this.initialized)if(e!==h.PROVIDER_ID)i(o.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const s=this.providers.get(e);s instanceof h?s.revokeAccessToken().then(t).catch(i):i(o.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(o.ERR_NOT_INITIALIZED)})}signIn(e,t){return new Promise((i,s)=>{if(this.initialized){let r=this.providers.get(e);r?r.signIn(t).then(a=>{this.setUser(a,e),i(a)}).catch(a=>{s(a)}):s(o.ERR_LOGIN_PROVIDER_NOT_FOUND)}else s(o.ERR_NOT_INITIALIZED)})}signOut(e=!1){return new Promise((t,i)=>{if(this.initialized)if(this._user){let r=this.providers.get(this._user.provider);r?r.signOut(e).then(()=>{t(),this.setUser(null)}).catch(a=>{i(a)}):i(o.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(o.ERR_NOT_LOGGED_IN);else i(o.ERR_NOT_INITIALIZED)})}setUser(e,t){e&&t&&(e.provider=t),this._user=e,this._authState.next(e)}}return o.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",o.ERR_NOT_LOGGED_IN="Not logged in",o.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",o.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",o.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token",o.\u0275fac=function(e){return new(e||o)(n.LFG("SocialAuthServiceConfig"),n.LFG(n.R0b),n.LFG(n.zs3))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),N=(()=>{class o{constructor(e){if(e)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(e){return{ngModule:o,providers:[g,{provide:"SocialAuthServiceConfig",useValue:e}]}}}return o.\u0275fac=function(e){return new(e||o)(n.LFG(o,12))},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({providers:[g],imports:[f.ez]}),o})();var z=u(2340),p=u(5675),M=u(4320);const j=function(){return["/projects"]};let w=(()=>{class o{constructor(e,t,i){this.socialAuthService=e,this.authService=t,this.router=i}ngOnInit(){}signInWithGoogle(){this.socialAuthService.signIn(h.PROVIDER_ID).then(e=>{this.signIn(e),console.log(e)}).catch(e=>{console.log(e)})}signIn(e){this.authService.login(e.idToken),this.router.navigate(["/account/profile"])}}return o.\u0275fac=function(e){return new(e||o)(n.Y36(g),n.Y36(M.e),n.Y36(p.F0))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-login"]],decls:33,vars:2,consts:[[1,"login","backgroundImage"],[1,"wrapper","wrapper-login"],[1,"container","container-login","animated","fadeIn"],[1,"text-center"],[1,"login-form"],[1,"form-group"],["for","username",1,"placeholder"],["id","username","name","username","type","text","required","",1,"form-control"],["for","password",1,"placeholder"],["href","#",1,"link","float-right"],[1,"position-relative"],["id","password","name","password","type","password","required","",1,"form-control"],[1,"show-password"],[1,"flaticon-interface"],[1,"form-group","form-action-d-flex","mb-3"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","rememberme",1,"custom-control-input"],["for","rememberme",1,"custom-control-label","m-0"],[1,"btn","btn-primary","col-md-5","float-right","mt-3","mt-sm-0","fw-bold",3,"routerLink"],[1,"login-account"],[1,"msg"],["href","#","id","show-signup",1,"link"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),n._uU(4,"Sign In To Admin"),n.qZA(),n.TgZ(5,"div",4)(6,"div",5)(7,"label",6)(8,"b"),n._uU(9,"Username"),n.qZA()(),n._UZ(10,"input",7),n.qZA(),n.TgZ(11,"div",5)(12,"label",8)(13,"b"),n._uU(14,"Password"),n.qZA()(),n.TgZ(15,"a",9),n._uU(16,"Forget Password ?"),n.qZA(),n.TgZ(17,"div",10),n._UZ(18,"input",11),n.TgZ(19,"div",12),n._UZ(20,"i",13),n.qZA()()(),n.TgZ(21,"div",14)(22,"div",15),n._UZ(23,"input",16),n.TgZ(24,"label",17),n._uU(25,"Remember Me"),n.qZA()(),n.TgZ(26,"a",18),n._uU(27,"Sign In"),n.qZA()(),n.TgZ(28,"div",19)(29,"span",20),n._uU(30,"Don't have an account yet ?"),n.qZA(),n.TgZ(31,"a",21),n._uU(32,"Sign Up"),n.qZA()()()()()()),2&e&&(n.xp6(26),n.Q6J("routerLink",n.DdM(1,j)))},dependencies:[p.yS],encapsulation:2}),o})();const V=[{path:"",children:[{path:"login",component:w,title:"Login"},{path:"**",redirectTo:"login",pathMatch:"full"}]}];let C=(()=>{class o{}return o.components=[w],o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[p.Bz.forChild(V),p.Bz]}),o})(),F=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!0,providers:[{id:h.PROVIDER_ID,provider:new h(z.N.googleClientId)}],onError:l=>{console.error(l)}}}],imports:[f.ez,C,N]}),o})()}}]);